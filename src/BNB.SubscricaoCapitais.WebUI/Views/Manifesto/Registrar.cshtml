@model BNB.ProjetoReferencia.WebUI.ViewModel.Views.Manifesto.ManifestoNewViewModel

@using BNB.ProjetoReferencia.WebUI.Helpers.Erros

@{
    ViewBag.Title = "Manifestar Interesse";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var listaTipoPessoa = ViewData["TiposPessoas"] as IList<BNB.ProjetoReferencia.Core.Domain.Util.TipoPessoa>;
    var listaTipoCustodia = ViewData["TiposCustodias"] as IList<BNB.ProjetoReferencia.Core.Domain.Util.TipoCustodia>;
}
<input id="document-id" data-document-id="new" type="hidden" />
<input id="usuario-logado" type="hidden" value="@ViewBag.UsuarioLogado" />
<div class="ui content">
    <div class="ui modal" id="loading-modal">
        <div class="ui active dimmer">
            <div class="ui indeterminate text loader">Aguarde...</div>
        </div>
        <p></p>
    </div>
    <div class="ui container">
        <div class="ui grid">
            <div class="sixteen wide column">
                <div class="ui breadcrumb">
                    <a href="@Url.Action("Index", "Home")" class="section">Inicio</a>
                    <div class="divider"> / </div>
                    <a href="@Url.Action("Registrar", "Manifesto")" class="section">Manifesto</a>
                    <div class="divider"> / </div>
                    <div class="active section">@ViewBag.Title</div>
                </div>
            </div>
            <div class="sixteen wide column">
                <div class="ui card fluid">
                    <div class="content">
                        <div class="header title">Manifesto</div>
                    </div>
                    <div class="content">
                        <div class="ui segment basic clearing">
                            <span class="ui mini right floated c-red f-italic">
                                <b>* </b> Campos de preenchimento obrigatório.
                            </span>
                            <div class="ui orange left floated header middle">
                                @ViewBag.Title
                            </div>
                        </div>
                        @if (ViewBag.Erros != null)
                        {
                            Html.RenderPartial("_ErrosDeValidacao", (IEnumerable<ErroValidacao>)ViewBag.Erros);
                        }
                        @if (ViewBag.Pendencias != null)
                        {
                            @* Html.Partial("_ErrosDeValidacao", (IEnumerable<ErroValidacao>)ViewBag.Pendencias); *@
                        }
                        <div id="erros-validacao"></div>
                        <div class="field">
                            <div id="failMessage" class="requiredFields ui negative @(ViewBag.requiredFields != null && ViewBag.requiredFields ? "visible" : "hidden") small message">
                                <i class="close icon"></i>
                                <div class="header">
                                    Dados obrigatórios não informados ou preenchidos incorretamente
                                </div>
                                <br />
                                <ul class="list">
                                    @Html.ValidationSummary(false, "", new { @class = "text-danger" })
                                </ul>
                            </div>
                        </div>

                        @using (Html.BeginForm())
                        {
                            <div class="ui form">
                                @Html.AntiForgeryToken()
                                <div class="fields">
                                    <div class="field three wide required">
                                        @Html.LabelFor(model => model.CPFOuCNPJ)
                                        @Html.TextBoxFor(model => model.CPFOuCNPJ, new
                                            {
                                                @class = "control-input",
                                                onkeyup = "mascara(this, mcnpj);",
                                                @tabindex = "1"
                                            })
                                    </div>
                                    <div class="align-items-end">
                                        <div class="ui icon buttons">
                                            <a class="ui button icon labeled bgm-orange-bnb btnReportarHorasEmLote" id="btn-consultar"><i class="search icon"></i>Pesquisar</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="fields">
                                    <div class="field three wide required disabled" id="field_TipoPessoa">
                                        @Html.LabelFor(model => model.TipoPessoa)
                                        @Html.DropDownListFor(model => model.TipoPessoa, new SelectList(listaTipoPessoa, "Codigo", "Descricao"), new { @class = "control-dropdown", @tabindex = "2" })
                                    </div>
                                    <div class="field ten wide required disabled" id="field_NomeInvestidor">
                                        @Html.LabelFor(model => model.NomeInvestidor, htmlAttributes: new { @class = "control-label" })
                                        @Html.TextBoxFor(model => model.NomeInvestidor, new
                                            {
                                                @class = "control-input",
                                                @tabindex = "3",
                                                @disabled = "disabled"
                                            })
                                    </div>
                                </div>
                                <div class="fields">
                                    <div class="field three wide required disabled" id="field_telefone">
                                        @Html.LabelFor(model => model.Telefone, htmlAttributes: new { @class = "control-label" })
                                        @Html.TextBoxFor(model => model.Telefone, new
                                            {
                                                @class = "control-input",
                                                @tabindex = "4",
                                                @disabled = "disabled"
                                            })
                                    </div>
                                    <div class="field six wide required disabled" id="field_endereco">
                                        @Html.LabelFor(model => model.Endereco, htmlAttributes: new { @class = "control-label" })
                                        @Html.TextBoxFor(model => model.Endereco, new
                                            {
                                                @class = "control-input",
                                                @tabindex = "5",
                                                @disabled = "disabled"
                                            })
                                    </div>
                                    <div class="field six wide required disabled" id="field_email">
                                        @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label" })
                                        @Html.TextBoxFor(model => model.Email, new
                                            {
                                                @class = "control-input",
                                                @tabindex = "6",
                                                @disabled = "disabled"
                                            })
                                    </div>
                                </div>
                                
                                <div class="fields">
                                    <div class="field three wide required disabled" id="field_TipoCustodia">
                                        @Html.LabelFor(model => model.TipoCustodia)
                                        @Html.DropDownListFor(model => model.TipoCustodia, new SelectList(listaTipoCustodia, "Codigo", "Descricao"), "Custódia Própria", new { @class = "control-dropdown", @tabindex = "7" })
                                    </div>
                                    <div class="field three wide required disabled">
                                        @Html.LabelFor(model => model.ValorAcao, htmlAttributes: new { @class = "control-label" })
                                        @Html.TextBoxFor(model => model.ValorAcao, "0", new
                                            {
                                                @tabindex = "8",
                                                @class = "control-input currency",
                                                @onkeyup = "mascara(this, mmoeda);",
                                                @disabled = "disabled"
                                            })
                                    </div>
                                </div>
                                <div class="fields" >
                                    <div class="field three wide required disabled" id="field_quantidade">
                                        @Html.LabelFor(model => model.Quantidade)
                                        @Html.TextBoxFor(model => model.Quantidade, new
                                            {
                                                @class = "control-input",
                                                @tabindex = "9",
                                                @type = "number",
                                                @min = "1",
                                                @disabled = "disabled"
                                            })
                                    </div>
                                    <div class="field three wide required disabled">
                                        @Html.LabelFor(model => model.ValorTotal, htmlAttributes: new { @class = "control-label" })
                                        @Html.TextBoxFor(model => model.ValorTotal, "0", new
                                            {
                                                @tabindex = "10",
                                                @class = "control-input currency",
                                                @onkeyup = "mascara(this, mmoeda);",
                                                @disabled = "disabled"
                                            })
                                        @Html.HiddenFor(model => model.MatriculaSolicitante, null )
                                    </div>
                                </div>
                                <div class="field right floated">
                                    @* @Html.ActionLink("Cancelar", "Index", "Home", new { }, new { @class = "ui button bgm-gray-bnb" }) *@
                                    <a class="ui button bgm-gray-bnb" id="btn-limpar" onclick="limparCampos()">Limpar campos</a>
                                    <button class="ui button bgm-wine-bnb icon labeled" type="submit" id="save-button">
                                        <i class="save icon"></i>
                                        Manifestar interesse
                                    </button>
                                </div>
							</div>
                        }
                    </div>
                    <div class="content">
                        <div class="field">
                            <div class="field right floated" id="global-filter-demanda" name="global-filter-demanda" hidden>
                                <div class="ui icon input">
                                    <i class="search icon"></i>
                                    <input type="text" id="globalFilterConsultarDemanda" onkeyup="javascript:forceLower(this);" placeholder="Digite para filtrar" size="50">
                                </div>
                            </div>
                            <div id="listaManifestos"></div>
                            <div class="field right floated elevated volume-demanda" id="volume-demanda" name="volume-demanda">
                                <a class="ui button icon labeled bgm-orange-bnb" id="btnDownload" href="#" onclick="javascript:ExportarDados();"><i class="download icon"></i>Exportar Excel</a>
                                <span class="ui larger" name="volumeManifestos" id="volumeManifestos"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="ui content">
    
</div>

@section Scripts {

    <script src="~/Scripts/mascaras.js"></script>
    <script src="~/Scripts/Layout/closeEventMessages.js"></script>
    <script src="~/Scripts/Manifesto/Consultar.js"></script>
    <script src="~/Scripts/Manifesto/Registrar.js"></script>
    <script>
        var info;
    </script>
}